CC=gcc
CFLAGS=-O2 -Wall -Wextra -Werror
LDFLAGS=
SERVER_EXECUTABLE=lab2aekN32491_server
CLIENT_EXECUTABLE=lab2aekN32491_client
SERVER_SOURCES=server.c numwords.c
CLIENT_SOURCES=client.c

SERVER_OBJECTS=$(SERVER_SOURCES:.c=.o)
CLIENT_OBJECTS=$(CLIENT_SOURCES:.c=.o)

.PHONY: all clean


all: $(SERVER_EXECUTABLE) $(CLIENT_EXECUTABLE)

$(SERVER_EXECUTABLE): $(SERVER_OBJECTS)
	$(CC) $(LDFLAGS) -o $@ $^

$(CLIENT_EXECUTABLE): $(CLIENT_OBJECTS)
	$(CC) $(LDFLAGS) -o $@ $^

%.o: %.c
	$(CC) $(CFLAGS) -c -o $@ $<

clean:
	rm -f $(SERVER_EXECUTABLE) $(SERVER_OBJECTS)
	rm -f $(CLIENT_EXECUTABLE) $(CLIENT_OBJECTS)
